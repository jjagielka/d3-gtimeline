(function(O,B){typeof exports=="object"&&typeof module<"u"?B(exports,require("d3"),require("dayjs")):typeof define=="function"&&define.amd?define(["exports","d3","dayjs"],B):(O=typeof globalThis<"u"?globalThis:O||self,B(O.d3=O.d3||{},O.d3,O.dayjs))})(this,function(O,B,G){"use strict";function et(n){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const d in n)if(d!=="default"){const m=Object.getOwnPropertyDescriptor(n,d);Object.defineProperty(i,d,m.get?m:{enumerable:!0,get:()=>n[d]})}}return i.default=n,Object.freeze(i)}const x=et(B),nt="div.tooltip {        position: absolute;        text-align: center;        padding: 5px;        /* font: 12px sans-serif; */        background: white;        border: 1px solid #AAA;        border-radius: 2px;        pointer-events: none;      }";function R(n){x.select("head").selectAll("#tooltip").data([1]).enter().append("style").attr("id","tooltip").text(nt);const i=x.select("body").append("div").attr("class","tooltip").style("opacity",0);return i.show=function(d){i.transition().duration(100).style("opacity",.95),i.html(n.apply(null,arguments)).style("left",d.pageX+"px").style("top",d.pageY-28+"px")},i.hide=function(d){i.transition().duration(100).style("opacity",0)},i}function rt(n){return x.max(n.nodes().map(i=>i.getComputedTextLength()))}function it(n){return function(i){return i.length>n?i.slice(0,n-1)+"…":i}}const N=1,st=2;function W(n,i){let d=["#FFF","#EEE"],m=x.scaleOrdinal(d),b=5,w,P="#AAA",j=40,k=100,s;function o(u){let A=i.domain(),T=R(r=>r),Y=x.scaleOrdinal(d),D=x.scaleOrdinal(d.reverse()),p=it(j),v=u.selectAll(".row").data(A,i).order(),a=v.enter().append("g").attr("class","row"),f=v.exit(),l=v.select("text");v=v.merge(a).attr("transform",r=>"translate(0,"+i(r)+")"),f.remove(),a.append("rect").attr("y",.5).attr("width",k).attr("height",i.bandwidth()).attr("stroke",P).attr("stroke-width",.75).attr("fill",Y),a.append("path").attr("stroke",D),l=l.merge(a.append("text").attr("y",i.bandwidth()/2).attr("dy","0.32em").on("mouseover",function(r,e){x.select(this).text()!=e&&T.show(e)}).on("mouseout",T.hide)).text(p),s===void 0&&(s=rt(l)+2*b,s=n===N?k-s:s),w=n===N?[0,s]:[s,k],l.attr("text-anchor",n===N?"start":"end").attr("dx",n===N?b:-b).attr("x",s);const y=function(r,e){s=Math.max(10,Math.min(k-10,s+r.dx)),x.select(this).attr("d","M"+s+",0.5V"+i.range()[1]),l.attr("x",s),w=n===N?[0,s]:[s,k],u.dispatch("offset",{detail:{offset:s}})};u.selectAll("g.y.axis > path").data([1]).join("path").attr("stroke",P).attr("stroke-width",1.75).attr("d","M"+(s+.5)+",0.5V"+i.range()[1]).style("cursor","ew-resize").call(x.drag().on("drag",y))}return o.draw_ticks=function(u,A){u.selectAll(".row").select("path").attr("d",A.map(T=>"M"+T+",1v"+(i.bandwidth()-1)).join(""))},o.scale=function(u){return arguments.length?(i=u,o):i},o.width=function(u){return arguments.length?(k=u,o):k},o.colors=function(u){return arguments.length?(d=u,o):d},o.padding=function(u){return arguments.length?(b=u,o):b},o.range=function(u){return arguments.length?(w=u,o):w},o.trim=function(u){return arguments.length?(j=u,o):j},o.offset=function(u){return arguments.length?(s=u,o):s},o.colorscale=function(u){return arguments.length?(m=u,o):m},o}function J(n){return W(st,n)}function X(n){return W(N,n)}var Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Q={exports:{}};(function(n,i){(function(d,m){n.exports=m()})(Z,function(){var d,m,b=1e3,w=6e4,P=36e5,j=864e5,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,s=31536e6,o=2628e6,u=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,A={years:s,months:o,days:j,hours:P,minutes:w,seconds:b,milliseconds:1,weeks:6048e5},T=function(r){return r instanceof l},Y=function(r,e,t){return new l(r,t,e.$l)},D=function(r){return m.p(r)+"s"},p=function(r){return r<0},v=function(r){return p(r)?Math.ceil(r):Math.floor(r)},a=function(r){return Math.abs(r)},f=function(r,e){return r?p(r)?{negative:!0,format:""+a(r)+e}:{negative:!1,format:""+r+e}:{negative:!1,format:""}},l=function(){function r(t,h,g){var c=this;if(this.$d={},this.$l=g,t===void 0&&(this.$ms=0,this.parseFromMilliseconds()),h)return Y(t*A[D(h)],this);if(typeof t=="number")return this.$ms=t,this.parseFromMilliseconds(),this;if(typeof t=="object")return Object.keys(t).forEach(function(S){c.$d[D(S)]=t[S]}),this.calMilliseconds(),this;if(typeof t=="string"){var $=t.match(u);if($){var _=$.slice(2).map(function(S){return S!=null?Number(S):0});return this.$d.years=_[0],this.$d.months=_[1],this.$d.weeks=_[2],this.$d.days=_[3],this.$d.hours=_[4],this.$d.minutes=_[5],this.$d.seconds=_[6],this.calMilliseconds(),this}}return this}var e=r.prototype;return e.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce(function(h,g){return h+(t.$d[g]||0)*A[g]},0)},e.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=v(t/s),t%=s,this.$d.months=v(t/o),t%=o,this.$d.days=v(t/j),t%=j,this.$d.hours=v(t/P),t%=P,this.$d.minutes=v(t/w),t%=w,this.$d.seconds=v(t/b),t%=b,this.$d.milliseconds=t},e.toISOString=function(){var t=f(this.$d.years,"Y"),h=f(this.$d.months,"M"),g=+this.$d.days||0;this.$d.weeks&&(g+=7*this.$d.weeks);var c=f(g,"D"),$=f(this.$d.hours,"H"),_=f(this.$d.minutes,"M"),S=this.$d.seconds||0;this.$d.milliseconds&&(S+=this.$d.milliseconds/1e3,S=Math.round(1e3*S)/1e3);var E=f(S,"S"),F=t.negative||h.negative||c.negative||$.negative||_.negative||E.negative,C=$.format||_.format||E.format?"T":"",H=(F?"-":"")+"P"+t.format+h.format+c.format+C+$.format+_.format+E.format;return H==="P"||H==="-P"?"P0D":H},e.toJSON=function(){return this.toISOString()},e.format=function(t){var h=t||"YYYY-MM-DDTHH:mm:ss",g={Y:this.$d.years,YY:m.s(this.$d.years,2,"0"),YYYY:m.s(this.$d.years,4,"0"),M:this.$d.months,MM:m.s(this.$d.months,2,"0"),D:this.$d.days,DD:m.s(this.$d.days,2,"0"),H:this.$d.hours,HH:m.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:m.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:m.s(this.$d.seconds,2,"0"),SSS:m.s(this.$d.milliseconds,3,"0")};return h.replace(k,function(c,$){return $||String(g[c])})},e.as=function(t){return this.$ms/A[D(t)]},e.get=function(t){var h=this.$ms,g=D(t);return g==="milliseconds"?h%=1e3:h=g==="weeks"?v(h/A[g]):this.$d[g],h||0},e.add=function(t,h,g){var c;return c=h?t*A[D(h)]:T(t)?t.$ms:Y(t,this).$ms,Y(this.$ms+c*(g?-1:1),this)},e.subtract=function(t,h){return this.add(t,h,!0)},e.locale=function(t){var h=this.clone();return h.$l=t,h},e.clone=function(){return Y(this.$ms,this)},e.humanize=function(t){return d().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},e.valueOf=function(){return this.asMilliseconds()},e.milliseconds=function(){return this.get("milliseconds")},e.asMilliseconds=function(){return this.as("milliseconds")},e.seconds=function(){return this.get("seconds")},e.asSeconds=function(){return this.as("seconds")},e.minutes=function(){return this.get("minutes")},e.asMinutes=function(){return this.as("minutes")},e.hours=function(){return this.get("hours")},e.asHours=function(){return this.as("hours")},e.days=function(){return this.get("days")},e.asDays=function(){return this.as("days")},e.weeks=function(){return this.get("weeks")},e.asWeeks=function(){return this.as("weeks")},e.months=function(){return this.get("months")},e.asMonths=function(){return this.as("months")},e.years=function(){return this.get("years")},e.asYears=function(){return this.as("years")},r}(),y=function(r,e,t){return r.add(e.years()*t,"y").add(e.months()*t,"M").add(e.days()*t,"d").add(e.hours()*t,"h").add(e.minutes()*t,"m").add(e.seconds()*t,"s").add(e.milliseconds()*t,"ms")};return function(r,e,t){d=t,m=t().$utils(),t.duration=function(c,$){var _=t.locale();return Y(c,{$l:_},$)},t.isDuration=T;var h=e.prototype.add,g=e.prototype.subtract;e.prototype.add=function(c,$){return T(c)?y(this,c,1):h.bind(this)(c,$)},e.prototype.subtract=function(c,$){return T(c)?y(this,c,-1):g.bind(this)(c,$)}}})})(Q);var ot=Q.exports;const at=K(ot);var U={exports:{}};(function(n,i){(function(d,m){n.exports=m()})(Z,function(){return function(d,m,b){d=d||{};var w=m.prototype,P={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function j(s,o,u,A){return w.fromToBase(s,o,u,A)}b.en.relativeTime=P,w.fromToBase=function(s,o,u,A,T){for(var Y,D,p,v=u.$locale().relativeTime||P,a=d.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=a.length,l=0;l<f;l+=1){var y=a[l];y.d&&(Y=A?b(s).diff(u,y.d,!0):u.diff(s,y.d,!0));var r=(d.rounding||Math.round)(Math.abs(Y));if(p=Y>0,r<=y.r||!y.r){r<=1&&l>0&&(y=a[l-1]);var e=v[y.l];T&&(r=T(""+r)),D=typeof e=="string"?e.replace("%d",r):e(r,o,y.l,p);break}}if(o)return D;var t=p?v.future:v.past;return typeof t=="function"?t(D):t.replace("%s",D)},w.to=function(s,o){return j(s,o,this,!0)},w.from=function(s,o){return j(s,o,this)};var k=function(s){return s.$u?b.utc():b()};w.toNow=function(s){return this.to(k(this),s)},w.fromNow=function(s){return this.from(k(this),s)}}})})(U);var ut=U.exports;const ct=K(ut);G.extend(at),G.extend(ct);function tt(n,i){return G.duration(i-n).humanize()}function q(){const n=Array.prototype.slice.call(arguments,0);return function(i){return n.reduce((d,m)=>m(d),i)}}function L(n){return function(i){return n===void 0?i:i[n]}}const dt=["#4285f4","#db4437","#f4b400","#0f9d58","#ab47bc","#5e97f5","#e06055","#f5bf26","#33ab71","#b762c6","#00acc1","#ff855f","#9e9d24","#26b8ca","#ff7043"];function lt(n){const i=window.getComputedStyle(n,null).getPropertyValue("font-size");return parseFloat(i)}function ht(n){return n.r*.299+n.g*.587+n.b*.114}function ft(n){return ht(n)>165}function mt(n){return ft(x.color(n))?"black":"white"}function V(n,i){return"translate("+n+","+i+")"}function gt(){let n=dt,i=5,d=2,m=!1,b=!1,w,P,j=0,k=L(0),s=L(1),o=L(2),u=L(3);function A(a,f){const l=a.select("text"),y=a.select("rect"),r=y.attr("width")-2*i,e=s(f);l.text(e);let t=l.node().getComputedTextLength();if(t>r){const h=r<0?0:r/t,g=Math.floor(e.length*h);l.text(g>2?e.slice(0,g-2)+"…":"")}}function T(a,f,l){const y=a.select("text").node(),r=y.getBBox(),e=l.scale().domain().indexOf(k(f)),t=l.colorscale()(e),h=a.selectAll("rect.bckg").data([f]).join("rect").attr("class","bckg").attr("fill",t).attr("x",r.x-i+d).attr("y",r.y-2).attr("width",r.width+i-d).attr("height",r.height);a.node().insertBefore(h.node(),y)}function Y(a,f){a.each(function(l,y){const r=x.select(this.parentNode);u(l)-o(l)?A(r,l):T(r,l,f)})}function D(a){return function(f,l){x.active(this).tween("text",function(){return function(y){Y(x.select(this),a)}})}}function p(a){const f=a.datum(),l=new Set(x.map(f,k)),y=new R(v),r=x.scaleOrdinal(n);w=w||[x.min(f,o),x.max(f,u)],b&&(w=x.extent(w.concat(new Date))),a.each(function(e){const t=P||this.getBoundingClientRect().width,h=l.size*(lt(this)+4*i),g=x.scaleBand().domain(l).range([0,h]),c=x.scaleTime().domain(w),$=(m?X:J)(g).width(t),_=x.select(this).selectAll("svg").data([1]).join("svg");_.attr("class","timeline").attr("width",t).attr("height",h+20);const S=_.append("g"),E=S.append("g").attr("class","y axis").call($);let F=$.range();c.range([F[0]+i,F[1]-i]).clamp(!0);const C=x.axisBottom(c),H=S.append("g").attr("class","x axis").attr("transform",V(0,h)).call(C);E.on("offset",()=>{F=$.range(),c.range([F[0]+i,F[1]-i]).clamp(!0),C.ticks(Math.min((F[1]-F[0])/70,10)),H.call(C),z.attr("transform",M=>V(c(o(M)),g(k(M)))).selectAll("rect").attr("width",M=>c(u(M))-c(o(M))||d).call(M=>Y(M,$)),E.call($.draw_ticks,c.ticks().map(c))}),H.select(".domain").remove(),H.selectAll(".tick line").attr("stroke","#AAA");const pt=c.ticks().map(c);E.call($.draw_ticks,pt);let z=S.selectAll("g.task").data(e);z.exit().remove();const I=z.enter().append("g").classed("task",!0);I.append("rect").attr("y",i).attr("height",g.bandwidth()-2*i).on("mouseover",y.show).on("mouseout",y.hide).style("fill",q(s,r)),I.append("text").attr("text-anchor","start").attr("fill",M=>u(M)-o(M)?q(s,r,mt)(M):"black").attr("pointer-events","none").attr("dx",i).attr("y",g.bandwidth()/2).attr("dy","0.32em").text(s),z=z.merge(I),z.attr("transform",M=>V(F[0],g(k(M)))).selectAll("rect").attr("width",0),z.transition().duration(j).attr("transform",M=>V(c(o(M)),g(k(M)))).selectAll("rect").attr("width",M=>c(u(M))-c(o(M))||d).on("start",D($)),b&&S.append("path").attr("stroke","red").attr("d","M"+c(new Date)+",0.5V"+h)})}return p.dates=function(a){return arguments.length?(w=a,p):w},p.width=function(a){return arguments.length?(P=a,p):P},p.today=function(a){return arguments.length?(b=a,p):b},p.colors=function(a){return arguments.length?(n=a,p):n},p.padding=function(a){return arguments.length?(i=a,p):i},p.milestone_width=function(a){return arguments.length?(d=a,p):d},p.reversed=function(a){return arguments.length?(m=a,p):m},p.duration=function(a){return arguments.length?(j=a,p):j},p;function v(a,f){const l=q(x.isoParse,x.timeFormat("%Y-%m-%d")),y=`<b>${s(f)}</b><hr style="margin: 2px 0 2px 0">${l(o(f))}`,r=u(f)-o(f)?` - ${l(u(f))}<br>${tt(o(f),u(f))}`:"";return y+r}}O.durationFormat=tt,O.timeline=gt,O.timelineAxisLeft=J,O.timelineAxisRight=X,O.tooltip=R,Object.keys(B).forEach(n=>{n!=="default"&&!Object.prototype.hasOwnProperty.call(O,n)&&Object.defineProperty(O,n,{enumerable:!0,get:()=>B[n]})}),Object.defineProperty(O,Symbol.toStringTag,{value:"Module"})});
