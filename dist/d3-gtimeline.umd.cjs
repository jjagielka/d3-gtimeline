(function(A,H){typeof exports=="object"&&typeof module<"u"?H(exports,require("d3"),require("dayjs")):typeof define=="function"&&define.amd?define(["exports","d3","dayjs"],H):(A=typeof globalThis<"u"?globalThis:A||self,H(A.d3=A.d3||{},A.d3,A.dayjs))})(this,function(A,H,N){"use strict";const Q="div.tooltip {        position: absolute;        text-align: center;        padding: 5px;        /* font: 12px sans-serif; */        background: white;        border: 1px solid #AAA;        border-radius: 2px;        pointer-events: none;      }";function L(n){d3.select("head").selectAll("#tooltip").data([1]).enter().append("style").attr("id","tooltip").text(Q);const r=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);return r.show=function(m){r.transition().duration(100).style("opacity",.95),r.html(n.apply(null,arguments)).style("left",m.pageX+"px").style("top",m.pageY-28+"px")},r.hide=function(m){r.transition().duration(100).style("opacity",0)},r}function U(n){return d3.max(n.nodes().map(r=>r.getComputedTextLength()))}function tt(n){return function(r){return r.length>n?r.slice(0,n-1)+"…":r}}const B=1,et=2;function R(n,r){let m=["#FFF","#EEE"],u=5,w,M="#AAA",S=40,v=100,c;function i(o){let T=r.domain(),k=L(f=>f),l=d3.scaleOrdinal(m),O=d3.scaleOrdinal(m.reverse()),a=tt(S),h=o.selectAll(".row").data(T,r).order(),p=h.enter().append("g").attr("class","row"),j=h.exit(),x=h.select("text");h=h.merge(p).attr("transform",f=>"translate(0,"+r(f)+")"),j.remove(),p.append("rect").attr("y",.5).attr("width",v).attr("height",r.bandwidth()).attr("stroke",M).attr("stroke-width",.75).attr("fill",l),p.append("path").attr("stroke",O),x=x.merge(p.append("text").attr("y",r.bandwidth()/2).attr("dy","0.32em").on("mouseover",function(f,s){d3.select(this).text()!=s&&k.show(s)}).on("mouseout",k.hide)).text(a),c===void 0&&(c=U(x)+2*u,c=n===B?v-c:c),w=n===B?[0,c]:[c,v],x.attr("text-anchor",n===B?"start":"end").attr("dx",n===B?u:-u).attr("x",c);const _=function(f,s){c=Math.max(10,Math.min(v-10,c+f.dx)),d3.select(this).attr("d","M"+c+",0.5V"+r.range()[1]),x.attr("x",c),w=n===B?[0,c]:[c,v],o.dispatch("offset",{detail:{offset:c}})};o.selectAll("g.y.axis > path").data([1]).join("path").attr("stroke",M).attr("stroke-width",1.75).attr("d","M"+(c+.5)+",0.5V"+r.range()[1]).style("cursor","ew-resize").call(d3.drag().on("drag",_))}return i.draw_ticks=function(o,T){o.selectAll(".row").select("path").attr("d",T.map(k=>"M"+k+",1v"+(r.bandwidth()-1)).join(""))},i.scale=function(o){return arguments.length?(r=o,i):r},i.width=function(o){return arguments.length?(v=o,i):v},i.colors=function(o){return arguments.length?(m=o,i):m},i.padding=function(o){return arguments.length?(u=o,i):u},i.range=function(o){return arguments.length?(w=o,i):w},i.trim=function(o){return arguments.length?(S=o,i):S},i.offset=function(o){return arguments.length?(c=o,i):c},i}function q(n){return R(et,n)}function I(n){return R(B,n)}var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var X={exports:{}};(function(n,r){(function(m,u){n.exports=u()})(W,function(){var m,u,w=1e3,M=6e4,S=36e5,v=864e5,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,i=31536e6,o=2628e6,T=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,k={years:i,months:o,days:v,hours:S,minutes:M,seconds:w,milliseconds:1,weeks:6048e5},l=function(s){return s instanceof _},O=function(s,e,t){return new _(s,t,e.$l)},a=function(s){return u.p(s)+"s"},h=function(s){return s<0},p=function(s){return h(s)?Math.ceil(s):Math.floor(s)},j=function(s){return Math.abs(s)},x=function(s,e){return s?h(s)?{negative:!0,format:""+j(s)+e}:{negative:!1,format:""+s+e}:{negative:!1,format:""}},_=function(){function s(t,d,$){var g=this;if(this.$d={},this.$l=$,t===void 0&&(this.$ms=0,this.parseFromMilliseconds()),d)return O(t*k[a(d)],this);if(typeof t=="number")return this.$ms=t,this.parseFromMilliseconds(),this;if(typeof t=="object")return Object.keys(t).forEach(function(Y){g.$d[a(Y)]=t[Y]}),this.calMilliseconds(),this;if(typeof t=="string"){var b=t.match(T);if(b){var y=b.slice(2).map(function(Y){return Y!=null?Number(Y):0});return this.$d.years=y[0],this.$d.months=y[1],this.$d.weeks=y[2],this.$d.days=y[3],this.$d.hours=y[4],this.$d.minutes=y[5],this.$d.seconds=y[6],this.calMilliseconds(),this}}return this}var e=s.prototype;return e.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce(function(d,$){return d+(t.$d[$]||0)*k[$]},0)},e.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=p(t/i),t%=i,this.$d.months=p(t/o),t%=o,this.$d.days=p(t/v),t%=v,this.$d.hours=p(t/S),t%=S,this.$d.minutes=p(t/M),t%=M,this.$d.seconds=p(t/w),t%=w,this.$d.milliseconds=t},e.toISOString=function(){var t=x(this.$d.years,"Y"),d=x(this.$d.months,"M"),$=+this.$d.days||0;this.$d.weeks&&($+=7*this.$d.weeks);var g=x($,"D"),b=x(this.$d.hours,"H"),y=x(this.$d.minutes,"M"),Y=this.$d.seconds||0;this.$d.milliseconds&&(Y+=this.$d.milliseconds/1e3,Y=Math.round(1e3*Y)/1e3);var P=x(Y,"S"),G=t.negative||d.negative||g.negative||b.negative||y.negative||P.negative,F=b.format||y.format||P.format?"T":"",E=(G?"-":"")+"P"+t.format+d.format+g.format+F+b.format+y.format+P.format;return E==="P"||E==="-P"?"P0D":E},e.toJSON=function(){return this.toISOString()},e.format=function(t){var d=t||"YYYY-MM-DDTHH:mm:ss",$={Y:this.$d.years,YY:u.s(this.$d.years,2,"0"),YYYY:u.s(this.$d.years,4,"0"),M:this.$d.months,MM:u.s(this.$d.months,2,"0"),D:this.$d.days,DD:u.s(this.$d.days,2,"0"),H:this.$d.hours,HH:u.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:u.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:u.s(this.$d.seconds,2,"0"),SSS:u.s(this.$d.milliseconds,3,"0")};return d.replace(c,function(g,b){return b||String($[g])})},e.as=function(t){return this.$ms/k[a(t)]},e.get=function(t){var d=this.$ms,$=a(t);return $==="milliseconds"?d%=1e3:d=$==="weeks"?p(d/k[$]):this.$d[$],d||0},e.add=function(t,d,$){var g;return g=d?t*k[a(d)]:l(t)?t.$ms:O(t,this).$ms,O(this.$ms+g*($?-1:1),this)},e.subtract=function(t,d){return this.add(t,d,!0)},e.locale=function(t){var d=this.clone();return d.$l=t,d},e.clone=function(){return O(this.$ms,this)},e.humanize=function(t){return m().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},e.valueOf=function(){return this.asMilliseconds()},e.milliseconds=function(){return this.get("milliseconds")},e.asMilliseconds=function(){return this.as("milliseconds")},e.seconds=function(){return this.get("seconds")},e.asSeconds=function(){return this.as("seconds")},e.minutes=function(){return this.get("minutes")},e.asMinutes=function(){return this.as("minutes")},e.hours=function(){return this.get("hours")},e.asHours=function(){return this.as("hours")},e.days=function(){return this.get("days")},e.asDays=function(){return this.as("days")},e.weeks=function(){return this.get("weeks")},e.asWeeks=function(){return this.as("weeks")},e.months=function(){return this.get("months")},e.asMonths=function(){return this.as("months")},e.years=function(){return this.get("years")},e.asYears=function(){return this.as("years")},s}(),f=function(s,e,t){return s.add(e.years()*t,"y").add(e.months()*t,"M").add(e.days()*t,"d").add(e.hours()*t,"h").add(e.minutes()*t,"m").add(e.seconds()*t,"s").add(e.milliseconds()*t,"ms")};return function(s,e,t){m=t,u=t().$utils(),t.duration=function(g,b){var y=t.locale();return O(g,{$l:y},b)},t.isDuration=l;var d=e.prototype.add,$=e.prototype.subtract;e.prototype.add=function(g,b){return l(g)?f(this,g,1):d.bind(this)(g,b)},e.prototype.subtract=function(g,b){return l(g)?f(this,g,-1):$.bind(this)(g,b)}}})})(X);var nt=X.exports;const rt=J(nt);var Z={exports:{}};(function(n,r){(function(m,u){n.exports=u()})(W,function(){return function(m,u,w){m=m||{};var M=u.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function v(i,o,T,k){return M.fromToBase(i,o,T,k)}w.en.relativeTime=S,M.fromToBase=function(i,o,T,k,l){for(var O,a,h,p=T.$locale().relativeTime||S,j=m.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],x=j.length,_=0;_<x;_+=1){var f=j[_];f.d&&(O=k?w(i).diff(T,f.d,!0):T.diff(i,f.d,!0));var s=(m.rounding||Math.round)(Math.abs(O));if(h=O>0,s<=f.r||!f.r){s<=1&&_>0&&(f=j[_-1]);var e=p[f.l];l&&(s=l(""+s)),a=typeof e=="string"?e.replace("%d",s):e(s,o,f.l,h);break}}if(o)return a;var t=h?p.future:p.past;return typeof t=="function"?t(a):t.replace("%s",a)},M.to=function(i,o){return v(i,o,this,!0)},M.from=function(i,o){return v(i,o,this)};var c=function(i){return i.$u?w.utc():w()};M.toNow=function(i){return this.to(c(this),i)},M.fromNow=function(i){return this.from(c(this),i)}}})})(Z);var st=Z.exports;const it=J(st);N.extend(rt),N.extend(it);function K(n,r){return N.duration(r-n).humanize()}function V(){const n=Array.prototype.slice.call(arguments,0);return function(r){return n.reduce((m,u)=>u(m),r)}}function z(n){return function(r){return n===void 0?r:r[n]}}const ot=["#4285f4","#db4437","#f4b400","#0f9d58","#ab47bc","#5e97f5","#e06055","#f5bf26","#33ab71","#b762c6","#00acc1","#ff855f","#9e9d24","#26b8ca","#ff7043"];function at(n){const r=window.getComputedStyle(n,null).getPropertyValue("font-size");return parseFloat(r)}function dt(n){return n.r*.299+n.g*.587+n.b*.114}function ut(n){return dt(n)>165}function ct(n){return ut(d3.color(n))?"black":"white"}function C(n,r){return"translate("+n+","+r+")"}function lt(){let n=ot,r=5,m=!1,u=!1,w,M,S=0,v=z(0),c=z(1),i=z(2),o=z(3);function T(a){a.each(function(h,p){const j=d3.select(this.parentNode),x=j.select("text"),_=j.select("rect"),f=_.attr("width")-2*r,s=c(h);x.text(s);let e=x.node().getComputedTextLength();if(e>f){const t=f<0?0:f/e,d=Math.floor(s.length*t);x.text(d>2?s.slice(0,d-2)+"…":"")}})}function k(a,h){d3.active(this).tween("text",function(){return function(p){T(d3.select(this))}})}function l(a){const h=a.datum(),p=new Set(d3.map(h,v)),j=new L(O),x=d3.scaleOrdinal(n);w=w||[d3.min(h,i),d3.max(h,o)],u&&(w=d3.extent(w.concat(new Date))),a.each(function(_){const f=M||this.getBoundingClientRect().width,s=p.size*(at(this)+4*r),e=d3.scaleBand().domain(p).range([0,s]),t=d3.scaleTime().domain(w),d=(m?I:q)(e).width(f),$=d3.select(this).selectAll("svg").data([1]).join("svg");$.attr("class","timeline").attr("width",f).attr("height",s+20);const g=$.append("g"),b=g.append("g").attr("class","y axis").call(d);let y=d.range();t.range([y[0]+r,y[1]-r]).clamp(!0);const Y=d3.axisBottom(t),P=g.append("g").attr("class","x axis").attr("transform",C(0,s)).call(Y);b.on("offset",()=>{y=d.range(),t.range([y[0]+r,y[1]-r]).clamp(!0),Y.ticks(Math.min((y[1]-y[0])/70,10)),P.call(Y),F.attr("transform",D=>C(t(i(D)),e(v(D)))).selectAll("rect").attr("width",D=>t(o(D))-t(i(D))).call(T),b.call(d.draw_ticks,t.ticks().map(t))}),P.select(".domain").remove(),P.selectAll(".tick line").attr("stroke","#AAA");const G=t.ticks().map(t);b.call(d.draw_ticks,G);let F=g.selectAll("g.task").data(_);F.exit().remove();const E=F.enter().append("g").classed("task",!0);E.append("rect").attr("y",r).attr("height",e.bandwidth()-2*r).on("mouseover",j.show).on("mouseout",j.hide).style("fill",V(c,x)),E.append("text").attr("text-anchor","start").attr("fill",V(c,x,ct)).attr("pointer-events","none").attr("dx",r).attr("y",e.bandwidth()/2).attr("dy","0.32em").text(c),F=F.merge(E),F.attr("transform",D=>C(y[0],e(v(D)))).selectAll("rect").attr("width",0),F.transition().duration(S).attr("transform",D=>C(t(i(D)),e(v(D)))).selectAll("rect").attr("width",D=>t(o(D))-t(i(D))).on("start",k),u&&g.append("path").attr("stroke","red").attr("d","M"+t(new Date)+",0.5V"+s)})}return l.dates=function(a){return arguments.length?(w=a,l):w},l.width=function(a){return arguments.length?(M=a,l):M},l.today=function(a){return arguments.length?(u=a,l):u},l.colors=function(a){return arguments.length?(n=a,l):n},l.padding=function(a){return arguments.length?(r=a,l):r},l.reversed=function(a){return arguments.length?(m=a,l):m},l.duration=function(a){return arguments.length?(S=a,l):S},l;function O(a,h){const p=V(d3.isoParse,d3.timeFormat("%Y-%m-%d"));return"<b>"+c(h)+'</b><hr style="margin: 2px 0 2px 0">'+p(i(h))+" - "+p(o(h))+"<br>"+K(i(h),o(h))}}A.durationFormat=K,A.timeline=lt,A.timelineAxisLeft=q,A.timelineAxisRight=I,A.tooltip=L,Object.keys(H).forEach(n=>{n!=="default"&&!Object.prototype.hasOwnProperty.call(A,n)&&Object.defineProperty(A,n,{enumerable:!0,get:()=>H[n]})}),Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
